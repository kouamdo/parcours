<div id="" class="d-flex flex-column justify-content-around">
  <div class="title" id="top1">
    <app-entete class="title"></app-entete>
  </div>
  <div class="card container-fluid" id="top">
    <div class='card-hearder pt-3'>
      <div class="d-flex align-items-center justify-content-end tableTools">
        <div class="mr-3" style="display: flex; align-items: center;">
          <app-modal-codebarre-scan-continue #barcodeScanner></app-modal-codebarre-scan-continue>
          <i class="fas fa-camera fa-3x icon" style="color:#28a745; cursor: pointer; position: relative;"
            (click)="openBarcodeScanner()"></i>
        </div>
        <div class="form-inline mr-2">
          <form class="example-form-entete">
            <input placeholder="{{'patient.search-bar' | translate}}" type="text" matInput aria-label="Rechercher" [formControl]="myControl" [value]="scan_val"
              [matAutocomplete]="auto">
            <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
              <mat-option *ngFor="let option of filteredOptions" [value]="option"
                (onSelectionChange)="rechercherListingPersonne(option)">
                {{option.nom}}
              </mat-option>
            </mat-autocomplete>
          </form>

        </div>
        <div *ngIf="isButton == 'true'" role="button" id="addUserBotton" routerLink="../patient-nouveau">
          <span title="Ajouter un patient">
            <i class="fa fa-user-plus" aria-hidden="true"></i>
          </span>
        </div>
      </div>
    </div>
    <div class="card-body p-0" id="tableBlock">
      <div class="table-responsive w-100">
        <table class='table table-sm table-centered table-striped table-bordered w-100' mat-table
          [dataSource]="dataSource" matSort (matSortChange)="announceSortChange($event)">

          <!-- nom Column -->
          <ng-container matColumnDef="nom">
            <th class="containHead" mat-header-cell *matHeaderCellDef mat-sort-header>
              {{"patient.table.title1" | translate}} </th>
            <td class="containCell" mat-cell *matCellDef="let element"> {{element.nom}} </td>
          </ng-container>

          <!-- prenom Column -->
          <ng-container matColumnDef="prenom">
            <th class="containHead" mat-header-cell *matHeaderCellDef mat-sort-header>
              {{"patient.table.title2" | translate}} </th>
            <td class="containCell" mat-cell *matCellDef="let element"> {{element.prenom}} </td>
          </ng-container>

          <!-- birthday Column -->
          <ng-container matColumnDef="anniversaire">
            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{"patient.table.title3" | translate}}
            </th>
            <td class="text-dark containCell" mat-cell *matCellDef="let element"> {{element.dateNaissance | date:
              'dd/MM/yyyy'}} </td>
          </ng-container>

          <!-- sexe Column -->
          <ng-container matColumnDef="sexe">
            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{"patient.table.title4" | translate}}
            </th>
            <td class="text-dark containCell" mat-cell *matCellDef="let element"> {{element.sexe}} </td>
          </ng-container>

          <!-- mail Column -->
          <ng-container matColumnDef="mail">
            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{"patient.table.title5" | translate}}
            </th>
            <td class="text-dark containCell" mat-cell *matCellDef="let element"> {{element.mail}} </td>
          </ng-container>

          <!-- adresse Column -->
          <ng-container matColumnDef="adresse">
            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{"patient.table.title6" | translate}}
            </th>
            <td class="text-dark containCell" mat-cell *matCellDef="let element"> {{element.adresse}} </td>
          </ng-container>

          <!-- telephone Column -->
          <ng-container matColumnDef="telephone">
            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{"patient.table.title7" | translate}}
            </th>
            <td class="text-dark containCell" mat-cell *matCellDef="let element"> {{element.telephone}} </td>
          </ng-container>

          <!-- action Column -->
          <ng-container matColumnDef="actions">
            <th class="text-dark containHead" mat-header-cell *matHeaderCellDef> {{"patient.table.title8" | translate}}
            </th>
            <td class="text-dark containCell" mat-cell *matCellDef="let element">
              <div id="actions" class="dropdown open">
                <button class="btn dropdown-toggle" type="button" id="triggerId" data-toggle="dropdown"
                  aria-haspopup="true" aria-expanded="false">
                  <span>...</span>
                </button>
                <div class="dropdown-menu" aria-labelledby="triggerId">
                  <div *ngFor="let action of actions">
                    <button *ngIf="action.bouton == 'false'" class="dropdown-item nav-link" [routerLink]="[action.lien,element.id]">
                      <span>{{action.nom}}</span>
                    </button>
                    <button *ngIf="action.bouton == 'true'" class="dropdown-item nav-link" (click)="setIdPersonne(element.id, element.nom); openNewTicketDialog()">
                    <span>{{action.nom}}</span>
                  </button>
                  </div>
                </div>
              </div>
            </td>
          </ng-container>

                  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                  <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
                <mat-paginator [pageSizeOptions]="[5, 10, 20]"
                               showFirstLastButtons
                               aria-label="Select page of periodic elements">
                </mat-paginator>
              </div>

    </div>

    <!-- Modal -->
    <div class="modal fade" id="modelTicket" tabindex="-1" role="dialog" aria-labelledby="modelTitleId"
      aria-hidden="true">
      <app-new-ticket></app-new-ticket>
    </div>

    <!-- Modal -->
    <div class="modal fade" id="modelTicket" tabindex="-1" role="dialog" aria-labelledby="modelTitleId"
      aria-hidden="true">
      <app-new-ticket></app-new-ticket>
    </div>
  </div>
</div>